<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.6.6587.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/17/09 17:21:59">
    <title>CREATE VIEW</title>
  </head>

  <body link="#99cc33" vlink="#666699" text="#000000" alink="#FFCC66" bgcolor="#FFFFFF">

    <table width="250" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
	  <tr> 
        <td>
<a href="CREATE_USER.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="DEALLOCATE.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  
    </table>

    <img src="images/GreenplumLogo.jpg" alt="Greenplum" width="212" height="58">
    <hr color="#99CC33" align="left">

    <br>
<a name="wp20941"> </a><h2><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="6"><b>
CREATE VIEW
</b></font></h2>
<hr color="#99cc33" align="left">
<a name="wp133181"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Defines a new view.
</font></div>
<a name="wp149747"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Synopsis
</b></font></h3>
<p><font color="Black" face="Courier New, Courier, mono" size="2">CREATE [OR REPLACE] [TEMP | TEMPORARY] VIEW <code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code> </font></p><a name="wp151918"> </a>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">&#160;&#160;&#160;&#160;&#160;&#160;&#160;[ ( <code><font face="Courier New, Courier, mono" size="2"><i>column_name</i></font></code> [, ...] ) ]</font><a name="wp151926"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">&#160;&#160;&#160;&#160;&#160;&#160;&#160;AS <code><font face="Courier New, Courier, mono" size="2"><i>query</i></font></code></font><a name="wp151932"> </a>
</pre>
<a name="wp118843"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Description
</b></font></h3>
<a name="wp152011"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<code><font face="Courier New, Courier, mono" size="2">CREATE VIEW</font></code> defines a view of a query. The view is not physically materialized. Instead, the query is run every time the view is referenced in a query. 
</font></p>
<a name="wp152013"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<code><font face="Courier New, Courier, mono" size="2">CREATE OR REPLACE VIEW</font></code> is similar, but if a view of the same name already exists, it is replaced. You can only replace a view with a new query that generates the identical set of columns (same column names and data types). 
</font></p>
<a name="wp152015"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If a schema name is given then the view is created in the specified schema. Otherwise it is created in the current schema. Temporary views exist in a special schema, so a schema name may not be given when creating a temporary view. The name of the view must be distinct from the name of any other view, table, sequence, or index in the same schema.
</font></p>
<a name="wp143248"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Parameters
</b></font></h3>
<a name="wp151946"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
TEMPORARY | TEMP
</b></font></h6>
<a name="wp151947"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If specified, the view is created as a temporary view. Temporary views are automatically dropped at the end of the current session. Existing permanent relations with the same name are not visible to the current session while the temporary view exists, unless they are referenced with schema-qualified names. If any of the tables referenced by the view are temporary, the view is created as a temporary view (whether <code><font face="Courier New, Courier, mono" size="2">TEMPORARY</font></code> is specified or not). 
</font></div>
<a name="wp151951"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>name</i></b></font>
</b></font></h6>
<a name="wp151952"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name (optionally schema-qualified) of a view to be created. 
</font></div>
<a name="wp151954"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>column_name</i></b></font>
</b></font></h6>
<a name="wp151955"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
An optional list of names to be used for columns of the view. If not given, the column names are deduced from the query. 
</font></div>
<a name="wp151957"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>query</i></b></font>
</b></font></h6>
<a name="wp151958"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
A <a href="SELECT.html">SELECT</a> or <a href="VALUES.html">VALUES</a> command which will provide the columns and rows of the view.
</font></div>
<a name="wp147533"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Notes
</b></font></h3>
<a name="wp152138"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Views in Greenplum Database are read only. The system will not allow an insert, update, or delete on a view. You can get the effect of an updatable view by creating rewrite rules on the view into appropriate actions on other tables. For more information see <code><font face="Courier New, Courier, mono" size="2">CREATE RULE</font></code>. 
</font></p>
<a name="wp152142"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Be careful that the names and data types of the view&#39;s columns will be assigned the way you want. For example:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE VIEW vista AS SELECT &#39;Hello World&#39;;</font><a name="wp152144"> </a>
</pre>
<a name="wp152172"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
is bad form in two ways: the column name defaults to <code><font face="Courier New, Courier, mono" size="2">?column?</font></code>, and the column data type defaults to <code><font face="Courier New, Courier, mono" size="2">unknown</font></code>. If you want a string literal in a view&#39;s result, use something like:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE VIEW vista AS SELECT text &#39;Hello World&#39; AS hello;</font><a name="wp152146"> </a>
</pre>
<a name="wp152147"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Access to tables referenced in the view is determined by permissions of the view owner not the current user (even if the current user is a superuser). This can be confusing in the case of superusers, since superusers typically have access to all objects. In the case of a view, even superusers must be explicitly granted access to to tables referenced in the view if they are not the owner of the view.
</font></p>
<a name="wp152816"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
However, functions called in the view are treated the same as if they had been called directly from the query using the view. Therefore the user of a view must have permissions to call any functions used by the view.
</font></p>
<a name="wp152415"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If you create a view with an <code><font face="Courier New, Courier, mono" size="2">ORDER BY</font></code> clause, the <code><font face="Courier New, Courier, mono" size="2">ORDER BY</font></code> clause is ignored when you do a <code><font face="Courier New, Courier, mono" size="2">SELECT</font></code> from the view.
</font></p>
<a name="wp144900"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Examples
</b></font></h3>
<a name="wp152191"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Create a view consisting of all comedy films: 
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE VIEW comedies AS SELECT * FROM films WHERE kind = 
&#39;comedy&#39;;</font><a name="wp151909"> </a>
</pre>
<a name="wp152207"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Create a view that gets the top ten ranked baby names:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE VIEW topten AS SELECT name, rank, gender, year FROM 
names, rank WHERE rank &lt; &#39;11&#39; AND names.id=rank.id;</font><a name="wp152218"> </a>
</pre>
<a name="wp144902"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Compatibility
</b></font></h3>
<a name="wp152038"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The SQL standard specifies some additional capabilities for the <code><font face="Courier New, Courier, mono" size="2">CREATE VIEW</font></code> statement that are not in Greenplum Database. The optional clauses for the full SQL command in the standard are: 
</font></p>
<ul>
<a name="wp152047"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2"><code><font face="Courier New, Courier, mono" size="2"><b>CHECK OPTION</b></font></code> - This option has to do with updatable views. All <code><font face="Courier New, Courier, mono" size="2">INSERT</font></code> and <code><font face="Courier New, Courier, mono" size="2">UPDATE</font></code> commands on the view will be checked to ensure data satisfy the view-defining condition (that is, the new data would be visible through the view). If they do not, the update will be rejected.</font></li>
</ul>

<ul>
<a name="wp152050"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2"><code><font face="Courier New, Courier, mono" size="2"><b>LOCAL</b></font></code> - Check for integrity on this view. </font></li>
</ul>

<ul>
<a name="wp152053"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2"><code><font face="Courier New, Courier, mono" size="2"><b>CASCADED</b></font></code> - Check for integrity on this view and on any dependent view. <code><font face="Courier New, Courier, mono" size="2">CASCADED</font></code> is assumed if neither <code><font face="Courier New, Courier, mono" size="2">CASCADED</font></code> nor <code><font face="Courier New, Courier, mono" size="2">LOCAL</font></code> is specified. </font></li>
</ul>

<a name="wp152057"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<code><font face="Courier New, Courier, mono" size="2">CREATE OR REPLACE VIEW</font></code> is a Greenplum Database language extension. So is the concept of a temporary view. 
</font></p>
<a name="wp140235"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
See Also
</b></font></h3>
<a name="wp149643"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<a href="SELECT.html">SELECT</a>, <a href="DROP_VIEW.html">DROP VIEW</a>
</font></p>
    <br>
    <hr color="#99CC33" align="left"> 

    <table width="157" border="0" align="right" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td width="157"  align="left"><p> 
        <font size="1"><font size="1"><font face="Arial, Helvetica, sans-serif">Greenplum Customer Support <br>
		
        1-866-410-6060
</font></font></font><font size="1"><font face="Arial, Helvetica, sans-serif"><br>
<a href="mailto://support@greenplum.com">support@greenplum.com
</a><br>
</font> </font> <font size="1"><a href="http://gpn.greenplum.com"><font face="Arial, Helvetica, sans-serif"> www.gpn.greenplum.com</font></a></font>  <font size="1"></font> <font size="1"></font> <font size="1"><br>
        </font> </p></td>
  </tr>
</table>
	

    


    <table width="250" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="CREATE_USER.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="DEALLOCATE.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></p>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
    </table>
      
  </body>
</html>
