<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.6.6587.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/17/09 17:21:58">
    <title>CREATE TYPE</title>
  </head>

  <body link="#99cc33" vlink="#666699" text="#000000" alink="#FFCC66" bgcolor="#FFFFFF">

    <table width="250" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
	  <tr> 
        <td>
<a href="CREATE_TRIGGER.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="CREATE_USER.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  
    </table>

    <img src="images/GreenplumLogo.jpg" alt="Greenplum" width="212" height="58">
    <hr color="#99CC33" align="left">

    <br>
<a name="wp20941"> </a><h2><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="6"><b>
CREATE TYPE
</b></font></h2>
<hr color="#99cc33" align="left">
<a name="wp133181"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Defines a new data type.
</font></div>
<a name="wp149747"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Synopsis
</b></font></h3>
<p><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE <code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code> AS ( <code><font face="Courier New, Courier, mono" size="2"><i>attribute_name</i></font></code> <code><font face="Courier New, Courier, mono" size="2"><i>data_type</i></font></code> [, ... ] )</font></p><a name="wp152914"> </a>
<p><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE <code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code> (</font></p><a name="wp152917"> </a>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">    INPUT = <code><font face="Courier New, Courier, mono" size="2"><i>input_function</i></font></code>,</font><a name="wp152918"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    OUTPUT = <code><font face="Courier New, Courier, mono" size="2"><i>output_function</i></font></code></font><a name="wp152919"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, RECEIVE = <code><font face="Courier New, Courier, mono" size="2"><i>receive_function</i></font></code>]</font><a name="wp152920"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, SEND = <code><font face="Courier New, Courier, mono" size="2"><i>send_function</i></font></code>]</font><a name="wp152921"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, ANALYZE = <code><font face="Courier New, Courier, mono" size="2"><i>analyze_function</i></font></code>]</font><a name="wp152922"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, INTERNALLENGTH = {<code><font face="Courier New, Courier, mono" size="2"><i>internallength</i></font></code> | VARIABLE}]</font><a name="wp152923"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, PASSEDBYVALUE]</font><a name="wp152924"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, ALIGNMENT = <code><font face="Courier New, Courier, mono" size="2"><i>alignment</i></font></code>]</font><a name="wp152925"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, STORAGE = <code><font face="Courier New, Courier, mono" size="2"><i>storage</i></font></code>]</font><a name="wp152926"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, DEFAULT = <code><font face="Courier New, Courier, mono" size="2"><i>default</i></font></code>]</font><a name="wp152927"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, ELEMENT = <code><font face="Courier New, Courier, mono" size="2"><i>element</i></font></code>]</font><a name="wp152928"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    [, DELIMITER = <code><font face="Courier New, Courier, mono" size="2"><i>delimiter</i></font></code>]</font><a name="wp152929"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">)</font><a name="wp152930"> </a>
</pre>
<p><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE <code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code></font></p><a name="wp152390"> </a>
<a name="wp118843"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Description
</b></font></h3>
<a name="wp153039"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> registers a new data type for use in the current database. The user who defines a type becomes its owner. 
</font></p>
<a name="wp153041"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If a schema name is given then the type is created in the specified schema. Otherwise it is created in the current schema. The type name must be distinct from the name of any existing type or domain in the same schema. The type name must also be distinct from the name of any existing table in the same schema.
</font></p>
<a name="wp153043"> </a><h4><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="4"><b>
Composite Types
</b></font></h4>
<a name="wp153044"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The first form of <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> creates a composite type. The composite type is specified by a list of attribute names and data types. This is essentially the same as the row type of a table, but using <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> avoids the need to create an actual table when all that is wanted is to define a type. A stand-alone composite type is useful as the argument or return type of a function.
</font></p>
<a name="wp153046"> </a><h4><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="4"><b>
Base Types
</b></font></h4>
<a name="wp153047"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The second form of <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> creates a new base type (scalar type). The parameters may appear in any order, not only that shown in the syntax, and most are optional. You must register two or more functions (using <code><font face="Courier New, Courier, mono" size="2">CREATE FUNCTION</font></code>) before defining the type. The support functions <code><font face="Courier New, Courier, mono" size="2"><i>input_function</i></font></code> and <code><font face="Courier New, Courier, mono" size="2"><i>output_function</i></font></code> are required, while the functions <code><font face="Courier New, Courier, mono" size="2"><i>receive_function</i></font></code>, <code><font face="Courier New, Courier, mono" size="2"><i>send_function</i></font></code> and <code><font face="Courier New, Courier, mono" size="2"><i>analyze_function</i></font></code> are optional. Generally these functions have to be coded in C or another low-level language. In Greenplum Database, any function used to implement a data type must be defined as <code><font face="Courier New, Courier, mono" size="2">IMMUTABLE</font></code>.
</font></p>
<a name="wp153049"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The <code><font face="Courier New, Courier, mono" size="2"><i>input_function</i></font></code> converts the type&#39;s external textual representation to the internal representation used by the operators and functions defined for the type. <code><font face="Courier New, Courier, mono" size="2"><i>output_function</i></font></code> performs the reverse transformation. The input function may be declared as taking one argument of type <code><font face="Courier New, Courier, mono" size="2">cstring</font></code>, or as taking three arguments of types <code><font face="Courier New, Courier, mono" size="2">cstring</font></code>, <code><font face="Courier New, Courier, mono" size="2">oid</font></code>, <code><font face="Courier New, Courier, mono" size="2">integer</font></code>. The first argument is the input text as a C string, the second argument is the type&#39;s own OID (except for array types, which instead receive their element type&#39;s OID), and the third is the <code><font face="Courier New, Courier, mono" size="2">typmod</font></code> of the destination column, if known (<code><font face="Courier New, Courier, mono" size="2">-1</font></code> will be passed if not). The input function must return a value of the data type itself. Usually, an input function should be declared <code><font face="Courier New, Courier, mono" size="2">STRICT</font></code>; if it is not, it will be called with a <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> first parameter when reading a <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> input value. The function must still return <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> in this case, unless it raises an error. (This case is mainly meant to support domain input functions, which may need to reject <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> inputs.) The output function must be declared as taking one argument of the new data type. The output function must return type <code><font face="Courier New, Courier, mono" size="2">cstring</font></code>. Output functions are not invoked for <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> values. 
</font></p>
<a name="wp153051"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The optional <code><font face="Courier New, Courier, mono" size="2"><i>receive_function</i></font></code> converts the type&#39;s external binary representation to the internal representation. If this function is not supplied, the type cannot participate in binary input. The binary representation should be chosen to be cheap to convert to internal form, while being reasonably portable. (For example, the standard integer data types use network byte order as the external binary representation, while the internal representation is in the machine&#39;s native byte order.) The receive function should perform adequate checking to ensure that the value is valid. The receive function may be declared as taking one argument of type <code><font face="Courier New, Courier, mono" size="2">internal</font></code>, or as taking three arguments of types <code><font face="Courier New, Courier, mono" size="2">internal</font></code>, <code><font face="Courier New, Courier, mono" size="2">oid</font></code>, <code><font face="Courier New, Courier, mono" size="2">integer</font></code>. The first argument is a pointer to a <code><font face="Courier New, Courier, mono" size="2">StringInfo</font></code> buffer holding the received byte string; the optional arguments are the same as for the text input function. The receive function must return a value of the data type itself. Usually, a receive function should be declared <code><font face="Courier New, Courier, mono" size="2">STRICT</font></code>; if it is not, it will be called with a <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> first parameter when reading a NULL input value. The function must still return <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> in this case, unless it raises an error. (This case is mainly meant to support domain receive functions, which may need to reject <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> inputs.) Similarly, the optional <code><font face="Courier New, Courier, mono" size="2"><i>send_function</i></font></code> converts from the internal representation to the external binary representation. If this function is not supplied, the type cannot participate in binary output. The send function must be declared as taking one argument of the new data type. The send function must return type <code><font face="Courier New, Courier, mono" size="2">bytea</font></code>. Send functions are not invoked for <code><font face="Courier New, Courier, mono" size="2">NULL</font></code> values. 
</font></p>
<a name="wp153053"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
You should at this point be wondering how the input and output functions can be declared to have results or arguments of the new type, when they have to be created before the new type can be created. The answer is that the type should first be defined as a shell type, which is a placeholder type that has no properties except a name and an owner. This is done by issuing the command <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE </font></code><code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code>, with no additional parameters. Then the I/O functions can be defined referencing the shell type. Finally, <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> with a full definition replaces the shell entry with a complete, valid type definition, after which the new type can be used normally. 
</font></p>
<a name="wp153055"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The optional <code><font face="Courier New, Courier, mono" size="2"><i>analyze_function</i></font></code> performs type-specific statistics collection for columns of the data type. By default, <code><font face="Courier New, Courier, mono" size="2">ANALYZE</font></code> will attempt to gather statistics using the type&#39;s `equals&#39; and `less-than&#39; operators, if there is a default b-tree operator class for the type. For non-scalar types this behavior is likely to be unsuitable, so it can be overridden by specifying a custom analysis function. The analysis function must be declared to take a single argument of type <code><font face="Courier New, Courier, mono" size="2">internal</font></code>, and return a <code><font face="Courier New, Courier, mono" size="2">boolean</font></code> result. The detailed API for analysis functions appears in <code><font face="Courier New, Courier, mono" size="2">$GPHOME/include/commands/vacuum.h</font></code>. 
</font></p>
<a name="wp153057"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
While the details of the new type&#39;s internal representation are only known to the I/O functions and other functions you create to work with the type, there are several properties of the internal representation that must be declared to Greenplum Database. Foremost of these is <code><font face="Courier New, Courier, mono" size="2"><i>internallength</i></font></code>. Base data types can be fixed-length, in which case <code><font face="Courier New, Courier, mono" size="2"><i>internallength</i></font></code> is a positive integer, or variable length, indicated by setting <code><font face="Courier New, Courier, mono" size="2"><i>internallength</i></font></code> to <code><font face="Courier New, Courier, mono" size="2">VARIABLE</font></code>. (Internally, this is represented by setting <code><font face="Courier New, Courier, mono" size="2">typlen</font></code> to <code><font face="Courier New, Courier, mono" size="2">-1</font></code>.) The internal representation of all variable-length types must start with a 4-byte integer giving the total length of this value of the type.
</font></p>
<a name="wp153059"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The optional flag <code><font face="Courier New, Courier, mono" size="2">PASSEDBYVALUE</font></code> indicates that values of this data type are passed by value, rather than by reference. You may not pass by value types whose internal representation is larger than the size of the <code><font face="Courier New, Courier, mono" size="2">Datum</font></code> type (4 bytes on most machines, 8 bytes on a few). 
</font></p>
<a name="wp153061"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The <code><font face="Courier New, Courier, mono" size="2"><i>alignment</i></font></code> parameter specifies the storage alignment required for the data type. The allowed values equate to alignment on 1, 2, 4, or 8 byte boundaries. Note that variable-length types must have an alignment of at least 4, since they necessarily contain an <code><font face="Courier New, Courier, mono" size="2">int4</font></code> as their first component. 
</font></p>
<a name="wp153063"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The <code><font face="Courier New, Courier, mono" size="2"><i>storage</i></font></code> parameter allows selection of storage strategies for variable-length data types. (Only <code><font face="Courier New, Courier, mono" size="2">plain</font></code> is allowed for fixed-length types.) <code><font face="Courier New, Courier, mono" size="2">plain</font></code> specifies that data of the type will always be stored in-line and not compressed. <code><font face="Courier New, Courier, mono" size="2">extended</font></code> specifies that the system will first try to compress a long data value, and will move the value out of the main table row if it&#39;s still too long. <code><font face="Courier New, Courier, mono" size="2">external</font></code> allows the value to be moved out of the main table, but the system will not try to compress it. <code><font face="Courier New, Courier, mono" size="2">main</font></code> allows compression, but discourages moving the value out of the main table. (Data items with this storage strategy may still be moved out of the main table if there is no other way to make a row fit, but they will be kept in the main table preferentially over <code><font face="Courier New, Courier, mono" size="2">extended</font></code> and <code><font face="Courier New, Courier, mono" size="2">external</font></code> items.) 
</font></p>
<a name="wp153065"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
A default value may be specified, in case a user wants columns of the data type to default to something other than the null value. Specify the default with the <code><font face="Courier New, Courier, mono" size="2">DEFAULT</font></code> key word. (Such a default may be overridden by an explicit <code><font face="Courier New, Courier, mono" size="2">DEFAULT</font></code> clause attached to a particular column.) 
</font></p>
<a name="wp153067"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
To indicate that a type is an array, specify the type of the array elements using the <code><font face="Courier New, Courier, mono" size="2">ELEMENT</font></code> key word. For example, to define an array of 4-byte integers (int4), specify <code><font face="Courier New, Courier, mono" size="2">ELEMENT = int4</font></code>. More details about array types appear below. 
</font></p>
<a name="wp153069"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
To indicate the delimiter to be used between values in the external representation of arrays of this type, <code><font face="Courier New, Courier, mono" size="2">delimiter</font></code> can be set to a specific character. The default delimiter is the comma (,). Note that the delimiter is associated with the array element type, not the array type itself.
</font></p>
<a name="wp153071"> </a><h4><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="4"><b>
Array Types
</b></font></h4>
<a name="wp153072"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Whenever a user-defined base data type is created, Greenplum Database automatically creates an associated array type, whose name consists of the base type&#39;s name prepended with an underscore. The parser understands this naming convention, and translates requests for columns of type <code><font face="Courier New, Courier, mono" size="2">foo[]</font></code> into requests for type <code><font face="Courier New, Courier, mono" size="2">_foo</font></code>. The implicitly-created array type is variable length and uses the built-in input and output functions <code><font face="Courier New, Courier, mono" size="2">array_in</font></code> and <code><font face="Courier New, Courier, mono" size="2">array_out</font></code>. 
</font></p>
<a name="wp153074"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
You might reasonably ask why there is an <code><font face="Courier New, Courier, mono" size="2">ELEMENT</font></code> option, if the system makes the correct array type automatically. The only case where it&#39;s useful to use <code><font face="Courier New, Courier, mono" size="2">ELEMENT</font></code> is when you are making a fixed-length type that happens to be internally an array of a number of identical things, and you want to allow these things to be accessed directly by subscripting, in addition to whatever operations you plan to provide for the type as a whole. For example, type <code><font face="Courier New, Courier, mono" size="2">name</font></code> allows its constituent <code><font face="Courier New, Courier, mono" size="2">char</font></code> elements to be accessed this way. A 2-D point type could allow its two component numbers to be accessed like point[0] and point[1]. Note that this facility only works for fixed-length types whose internal form is exactly a sequence of identical fixed-length fields. A subscriptable variable-length type must have the generalized internal representation used by <code><font face="Courier New, Courier, mono" size="2">array_in</font></code> and <code><font face="Courier New, Courier, mono" size="2">array_out</font></code>. For historical reasons, subscripting of fixed-length array types starts from zero, rather than from one as for variable-length arrays.
</font></p>
<a name="wp143248"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Parameters
</b></font></h3>
<a name="wp153438"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>name</i></b></font>
</b></font></h6>
<a name="wp153439"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name (optionally schema-qualified) of a type to be created. 
</font></div>
<a name="wp153441"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>attribute_name</i></b></font>
</b></font></h6>
<a name="wp153442"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of an attribute (column) for the composite type. 
</font></div>
<a name="wp153444"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>data_type</i></b></font>
</b></font></h6>
<a name="wp153445"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of an existing data type to become a column of the composite type. 
</font></div>
<a name="wp153447"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>input_function</i></b></font>
</b></font></h6>
<a name="wp153448"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of a function that converts data from the type&#39;s external textual form to its internal form. 
</font></div>
<a name="wp153450"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>output_function</i></b></font>
</b></font></h6>
<a name="wp153451"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of a function that converts data from the type&#39;s internal form to its external textual form. 
</font></div>
<a name="wp153453"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>receive_function</i></b></font>
</b></font></h6>
<a name="wp153454"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of a function that converts data from the type&#39;s external binary form to its internal form. 
</font></div>
<a name="wp153456"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>send_function</i></b></font>
</b></font></h6>
<a name="wp153457"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of a function that converts data from the type&#39;s internal form to its external binary form. 
</font></div>
<a name="wp153459"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>analyze_function</i></b></font>
</b></font></h6>
<a name="wp153460"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name of a function that performs statistical analysis for the data type. 
</font></div>
<a name="wp153462"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>internallength</i></b></font>
</b></font></h6>
<a name="wp153463"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
A numeric constant that specifies the length in bytes of the new type&#39;s internal representation. The default assumption is that it is variable-length. 
</font></div>
<a name="wp153465"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>alignment</i></b></font>
</b></font></h6>
<a name="wp153466"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The storage alignment requirement of the data type. Must be one of <code><font face="Courier New, Courier, mono" size="2">char</font></code>, <code><font face="Courier New, Courier, mono" size="2">int2</font></code>, <code><font face="Courier New, Courier, mono" size="2">int4</font></code>, or <code><font face="Courier New, Courier, mono" size="2">double</font></code>. The default is <code><font face="Courier New, Courier, mono" size="2">int4</font></code>. 
</font></div>
<a name="wp153468"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>storage</i></b></font>
</b></font></h6>
<a name="wp153469"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The storage strategy for the data type. Must be one of <code><font face="Courier New, Courier, mono" size="2">plain</font></code>, <code><font face="Courier New, Courier, mono" size="2">external</font></code>, <code><font face="Courier New, Courier, mono" size="2">extended</font></code>, or <code><font face="Courier New, Courier, mono" size="2">main</font></code>. The default is <code><font face="Courier New, Courier, mono" size="2">plain</font></code>. 
</font></div>
<a name="wp153471"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>default</i></b></font>
</b></font></h6>
<a name="wp153472"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The default value for the data type. If this is omitted, the default is null. 
</font></div>
<a name="wp153474"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>element</i></b></font>
</b></font></h6>
<a name="wp153475"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The type being created is an array; this specifies the type of the array elements. 
</font></div>
<a name="wp153477"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>delimiter</i></b></font>
</b></font></h6>
<a name="wp153478"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The delimiter character to be used between values in arrays made of this type.
</font></div>
<a name="wp147533"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Notes
</b></font></h3>
<a name="wp153696"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
User-defined type names cannot begin with the underscore character (_) and can only be 62 characters long (or in general <code><font face="Courier New, Courier, mono" size="2">NAMEDATALEN - 2</font></code>, rather than the <code><font face="Courier New, Courier, mono" size="2">NAMEDATALEN - 1</font></code> characters allowed for other names). Type names beginning with underscore are reserved for internally-created array type names.
</font></p>
<a name="wp153698"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Because there are no restrictions on use of a data type once it&#39;s been created, creating a base type is tantamount to granting public execute permission on the functions mentioned in the type definition. (The creator of the type is therefore required to own these functions.) This is usually not an issue for the sorts of functions that are useful in a type definition. But you might want to think twice before designing a type in a way that would require `secret&#39; information to be used while converting it to or from external form. 
</font></p>
<a name="wp153700"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Before Greenplum Database version 2.4, the syntax <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE </font></code><code><font face="Courier New, Courier, mono" size="2"><i>name</i></font></code> did not exist. The way to create a new base type was to create its input function first. In this approach, Greenplum Database will first see the name of the new data type as the return type of the input function. The shell type is implicitly created in this situation, and then it can be referenced in the definitions of the remaining I/O functions. This approach still works, but is deprecated and may be disallowed in some future release. Also, to avoid accidentally cluttering the catalogs with shell types as a result of simple typos in function definitions, a shell type will only be made this way when the input function is written in C.
</font></p>
<a name="wp144900"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Examples
</b></font></h3>
<a name="wp153760"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This example creates a composite type and uses it in a function definition:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE compfoo AS (f1 int, f2 text);</font><a name="wp153762"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2"></font><a name="wp153764"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">CREATE FUNCTION getfoo() RETURNS SETOF compfoo AS $$</font><a name="wp153822"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    SELECT fooid, fooname FROM foo</font><a name="wp153765"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">$$ LANGUAGE SQL;</font><a name="wp153766"> </a>
</pre>
<a name="wp153767"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This example creates the base data type box and then uses the type in a table definition:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE box;</font><a name="wp153769"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2"></font><a name="wp153770"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">CREATE FUNCTION my_box_in_function(cstring) RETURNS box AS 
... ;</font><a name="wp153771"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">CREATE FUNCTION my_box_out_function(box) RETURNS cstring AS 
... ;</font><a name="wp153772"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2"></font><a name="wp153773"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE box (</font><a name="wp153774"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INTERNALLENGTH = 16,</font><a name="wp153775"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INPUT = my_box_in_function,</font><a name="wp153776"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    OUTPUT = my_box_out_function</font><a name="wp153777"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">);</font><a name="wp153778"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2"></font><a name="wp153779"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">CREATE TABLE myboxes (</font><a name="wp153780"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    id integer,</font><a name="wp153781"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    description box</font><a name="wp153782"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">);</font><a name="wp153783"> </a>
</pre>
<a name="wp153784"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If the internal structure of box were an array of four <code><font face="Courier New, Courier, mono" size="2">float4</font></code> elements, we might instead use:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE box (</font><a name="wp153786"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INTERNALLENGTH = 16,</font><a name="wp153787"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INPUT = my_box_in_function,</font><a name="wp153788"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    OUTPUT = my_box_out_function,</font><a name="wp153789"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    ELEMENT = float4</font><a name="wp153790"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">);</font><a name="wp153791"> </a>
</pre>
<a name="wp153831"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
which would allow a box value&#39;s component numbers to be accessed by subscripting. Otherwise the type behaves the same as before.
</font></p>
<a name="wp153793"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This example creates a large object type and uses it in a table definition:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TYPE bigobj (</font><a name="wp153795"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INPUT = lo_filein, OUTPUT = lo_fileout,</font><a name="wp153796"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    INTERNALLENGTH = VARIABLE</font><a name="wp153797"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">);</font><a name="wp153798"> </a>
</pre>
<a name="wp153799"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">CREATE TABLE big_objs (</font><a name="wp153852"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    id integer,</font><a name="wp153800"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">    obj bigobj</font><a name="wp153801"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">);</font><a name="wp152976"> </a>
</pre>
<a name="wp144902"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Compatibility
</b></font></h3>
<a name="wp152983"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> command is a Greenplum Database extension. There is a <code><font face="Courier New, Courier, mono" size="2">CREATE TYPE</font></code> statement in the SQL standard that is rather different in detail. 
</font></p>
<a name="wp140235"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
See Also
</b></font></h3>
<a name="wp152988"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<a href="CREATE_FUNCTION.html">CREATE FUNCTION</a>, <a href="ALTER_TYPE.html">ALTER TYPE</a>, <a href="DROP_TYPE.html">DROP TYPE</a>, <a href="CREATE_DOMAIN.html">CREATE DOMAIN</a>
</font></p>
    <br>
    <hr color="#99CC33" align="left"> 

    <table width="157" border="0" align="right" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td width="157"  align="left"><p> 
        <font size="1"><font size="1"><font face="Arial, Helvetica, sans-serif">Greenplum Customer Support <br>
		
        1-866-410-6060
</font></font></font><font size="1"><font face="Arial, Helvetica, sans-serif"><br>
<a href="mailto://support@greenplum.com">support@greenplum.com
</a><br>
</font> </font> <font size="1"><a href="http://gpn.greenplum.com"><font face="Arial, Helvetica, sans-serif"> www.gpn.greenplum.com</font></a></font>  <font size="1"></font> <font size="1"></font> <font size="1"><br>
        </font> </p></td>
  </tr>
</table>
	

    


    <table width="250" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="CREATE_TRIGGER.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="CREATE_USER.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></p>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
    </table>
      
  </body>
</html>
