<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.6.6587.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/17/09 17:22:00">
    <title>DELETE</title>
  </head>

  <body link="#99cc33" vlink="#666699" text="#000000" alink="#FFCC66" bgcolor="#FFFFFF">

    <table width="250" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
	  <tr> 
        <td>
<a href="DECLARE.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="DROP_AGGREGATE.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  
    </table>

    <img src="images/GreenplumLogo.jpg" alt="Greenplum" width="212" height="58">
    <hr color="#99CC33" align="left">

    <br>
<a name="wp20941"> </a><h2><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="6"><b>
DELETE
</b></font></h2>
<hr color="#99cc33" align="left">
<a name="wp133181"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Deletes rows from a table.
</font></div>
<a name="wp149747"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Synopsis
</b></font></h3>
<p><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM [ONLY] <code><font face="Courier New, Courier, mono" size="2"><i>table</i></font></code> [[AS] <code><font face="Courier New, Courier, mono" size="2"><i>alias</i></font></code>]</font></p><a name="wp152886"> </a>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">&#160;&#160;&#160;&#160;&#160;&#160;[USING <code><font face="Courier New, Courier, mono" size="2"><i>usinglist</i></font></code>]</font><a name="wp152887"> </a>
<font color="Black" face="Courier New, Courier, mono" size="2">&#160;&#160;&#160;&#160;&#160;&#160;[WHERE <code><font face="Courier New, Courier, mono" size="2"><i>condition</i></font></code>]</font><a name="wp152888"> </a>
</pre>
<a name="wp118843"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Description
</b></font></h3>
<a name="wp153075"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> deletes rows that satisfy the <code><font face="Courier New, Courier, mono" size="2">WHERE</font></code> clause from the specified table. If the <code><font face="Courier New, Courier, mono" size="2">WHERE</font></code> clause is absent, the effect is to delete all rows in the table. The result is a valid, but empty table. 
</font></p>
<a name="wp153079"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
By default, <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> will delete rows in the specified table and all its child tables. If you wish to delete only from the specific table mentioned, you must use the <code><font face="Courier New, Courier, mono" size="2">ONLY</font></code> clause. 
</font></p>
<a name="wp153081"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
There are two ways to delete rows in a table using information contained in other tables in the database: using sub-selects, or specifying additional tables in the <code><font face="Courier New, Courier, mono" size="2">USING</font></code> clause. Which technique is more appropriate depends on the specific circumstances. Note that if you do join two or more tables in a <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> command, those tables must have the same Greenplum distribution key column(s) and also be joined on the distribution key column(s). 
</font></p>
<a name="wp153085"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
You must have the <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> privilege on the table to delete from it. 
</font></p>
<a name="wp152800"> </a><h4><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="4"><b>
Outputs
</b></font></h4>
<a name="wp153099"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
On successful completion, a <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> command returns a command tag of the form
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE <code><font face="Courier New, Courier, mono" size="2"><i>count</i></font></code></font><a name="wp153101"> </a>
</pre>
<a name="wp153208"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The count is the number of rows deleted. If count is 0, no rows matched the condition (this is not considered an error). 
</font></p>
<a name="wp143248"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Parameters
</b></font></h3>
<a name="wp153144"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
ONLY
</b></font></h6>
<a name="wp153145"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
If specified, delete rows from the named table only. When not specified, any tables inheriting from the named table are also processed. 
</font></div>
<a name="wp153147"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>table</i></b></font>
</b></font></h6>
<a name="wp153148"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The name (optionally schema-qualified) of an existing table. 
</font></div>
<a name="wp153150"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>alias</i></b></font>
</b></font></h6>
<a name="wp153151"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
A substitute name for the target table. When an alias is provided, it completely hides the actual name of the table. For example, given <code><font face="Courier New, Courier, mono" size="2">DELETE FROM foo AS f</font></code>, the remainder of the <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> statement must refer to this table as <code><font face="Courier New, Courier, mono" size="2">f</font></code> not <code><font face="Courier New, Courier, mono" size="2">foo</font></code>. 
</font></div>
<a name="wp153153"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>usinglist</i></b></font>
</b></font></h6>
<a name="wp153154"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
A list of table expressions, allowing columns from other tables to appear in the <code><font face="Courier New, Courier, mono" size="2">WHERE</font></code> condition. This is similar to the list of tables that can be specified in the <code><font face="Courier New, Courier, mono" size="2">FROM</font></code> Clause of a <a href="SELECT.html">SELECT</a> statement; for example, an alias for the table name can be specified. Do not repeat the target table in the <code><font face="Courier New, Courier, mono" size="2">usinglist</font></code>, unless you wish to set up a self-join. 
</font></div>
<a name="wp153156"> </a><h6><font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b>
<font color="#E5B53A" face="Arial, Verdana, Helvetica, sans-serif" size="2"><b><i>condition</i></b></font>
</b></font></h6>
<a name="wp153157"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
An expression returning a value of type <code><font face="Courier New, Courier, mono" size="2">boolean</font></code>, which determines the rows that are to be deleted.
</font></div>
<a name="wp144900"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Notes
</b></font></h3>
<a name="wp153496"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
You cannot use <code><font face="Courier New, Courier, mono" size="2">STABLE</font></code> or <code><font face="Courier New, Courier, mono" size="2">VOLATILE</font></code> functions in a <code><font face="Courier New, Courier, mono" size="2">DELETE</font></code> statement if mirrors are enabled. This can potentially cause the primary segment and its mirror to become out-of-sync because the command is run first on the primary and then a second time on the mirror in the current Greenplum Database implementation.
</font></p>
<a name="wp152960"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Greenplum Database lets you reference columns of other tables in the <code><font face="Courier New, Courier, mono" size="2">WHERE</font></code> condition by specifying the other tables in the <code><font face="Courier New, Courier, mono" size="2">USING</font></code> clause. For example, to the name Hannah from the rank table, one might do:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM rank USING names WHERE names.id = rank.id AND 
name = &#39;Hannah&#39;;</font><a name="wp152962"> </a>
</pre>
<a name="wp152989"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
What is essentially happening here is a join between rank and names, with all successfully joined rows being marked for deletion. This syntax is not standard. However, this join style is usually easier to write and faster to execute than a more standard sub-select style, such as:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM rank WHERE id IN (SELECT id FROM names WHERE name 
= &#39;Hannah&#39;);</font><a name="wp153056"> </a>
</pre>
<a name="wp153035"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Note also that in Greenplum Database, any tables that are joined in a delete operation must have the same Greenplum distribution key and be joined on the column(s) that make up the distribution key (equijoin). 
</font></p>
<a name="wp153920"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
To improve performance with scans of temporary tables whose rows are frequently deleted, Greenplum Database adds a <code><font face="Courier New, Courier, mono" size="2">TRUNCATE</font></code> command to every unqualified <code><font face="Courier New, Courier, mono" size="2">DELETE FROM</font></code> command. The added <code><font face="Courier New, Courier, mono" size="2">TRUNCATE</font></code> command, where it is allowed by permissions, frees the disk space occupied by rows rather than just marking the rows as deleted. This prevents potential performance degradation resulting from scanning deleted rows. This behavior can be disabled or enabled by the server configuration parameter <a href="../../Output/Admin/guc_configs.html#wp318906">gp_enable_delete_as_truncate</a>.
</font></p>
<a name="wp152617"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Examples
</b></font></h3>
<a name="wp152821"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Delete all films but musicals:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM films WHERE kind &lt;&gt; &#39;Musical&#39;;</font><a name="wp152823"> </a>
</pre>
<a name="wp152824"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Clear the table films:
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM films;</font><a name="wp152826"> </a>
</pre>
<a name="wp152856"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Delete using an equijoin (assuming both Greenplum Database tables are distributed on the id column):
</font></p>
<pre><font color="Black" face="Courier New, Courier, mono" size="2">DELETE FROM rank USING names WHERE names.id = rank.id AND 
name = &#39;Hannah&#39;;</font><a name="wp152875"> </a>
</pre>
<a name="wp152877"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
Compatibility
</b></font></h3>
<a name="wp152934"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This command conforms to the SQL standard, except that the <code><font face="Courier New, Courier, mono" size="2">USING</font></code> clause is a Greenplum Database extension.
</font></p>
<a name="wp140235"> </a><h3><font color="#8CC63F" face="Arial, Verdana, Helvetica, sans-serif" size="5"><b>
See Also
</b></font></h3>
<a name="wp152557"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<a href="TRUNCATE.html">TRUNCATE</a>
</font></p>
    <br>
    <hr color="#99CC33" align="left"> 

    <table width="157" border="0" align="right" cellpadding="0" cellspacing="0">
  <tr valign="top"> 
    <td width="157"  align="left"><p> 
        <font size="1"><font size="1"><font face="Arial, Helvetica, sans-serif">Greenplum Customer Support <br>
		
        1-866-410-6060
</font></font></font><font size="1"><font face="Arial, Helvetica, sans-serif"><br>
<a href="mailto://support@greenplum.com">support@greenplum.com
</a><br>
</font> </font> <font size="1"><a href="http://gpn.greenplum.com"><font face="Arial, Helvetica, sans-serif"> www.gpn.greenplum.com</font></a></font>  <font size="1"></font> <font size="1"></font> <font size="1"><br>
        </font> </p></td>
  </tr>
</table>
	

    


    <table width="250" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="DECLARE.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="DROP_AGGREGATE.html"><img src="images/snext.gif" border="0" alt="Next"></a><a href="IX.html"><img src="images/sindex.gif" border="0" alt="Index"></a>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><strong><font color="#000000" size="1" face="Arial, Helvetica, sans-serif">Greenplum Database 3.3 SQL Reference</font></strong></p>
        </td>
      </tr>
	  <tr> 
        <td>
          <p><font size="1" face="Arial, Helvetica, sans-serif">Last Updated: February 17, 2009</font></p>
        </td>
      </tr>
    </table>
      
  </body>
</html>
